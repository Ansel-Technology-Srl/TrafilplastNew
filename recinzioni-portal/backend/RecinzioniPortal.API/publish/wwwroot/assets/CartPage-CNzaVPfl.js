import{j as e}from"./vendor-three-CHCIWYOy.js";import{c as s,r as t}from"./vendor-react-DmByJA4P.js";import{c as a}from"./index-BDNQnAMU.js";import{u as r}from"./formatters-BFOEvdlG.js";import{I as c,J as n,S as l,w as i,N as o,O as x,h as d,Q as m,i as p,F as h,z as j}from"./vendor-ui-CwcPvQqL.js";import{u}from"./vendor-i18n-BveTNVnu.js";function g(){const{t:g}=u(),N=s(),y=r(),{items:f,removeItem:b,updateQuantity:v,clear:w,getSubtotal:C,getVAT:z,getTotal:k,getItemCount:q}=a(),[P,S]=t.useState({});return 0===f.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(c,{className:"w-24 h-24 text-gray-300 mb-6"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-500 mb-2",children:g("cart.emptyCart")}),e.jsx("p",{className:"text-gray-400 mb-6",children:g("cart.emptyCartMessage")}),e.jsxs("button",{onClick:()=>N("/catalogo"),className:"btn-primary flex items-center gap-2",children:[e.jsx(n,{className:"w-4 h-4"}),g("cart.goToCatalog")]})]}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(l,{className:"w-7 h-7"}),g("cart.title"),e.jsx("span",{className:"text-sm font-normal bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:g("cart.itemCount",{count:q()})})]}),e.jsxs("button",{onClick:w,className:"btn-danger text-sm",children:[e.jsx(i,{className:"w-4 h-4 mr-1 inline"}),g("cart.clearCart")]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm","aria-label":g("a11y.tableCaption.cart"),children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b text-left text-xs text-gray-500 uppercase",children:[e.jsx("th",{scope:"col",className:"px-4 py-3 w-10"}),e.jsx("th",{scope:"col",className:"px-4 py-3",children:g("cart.product")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center",children:g("cart.um")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center",children:g("cart.quantity")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right",children:g("cart.unitPrice")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-right",children:g("cart.totalPrice")}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center",children:g("cart.actions")})]})}),e.jsx("tbody",{className:"divide-y",children:f.map(s=>{const a=s.isConfigured,r=P[s.id],c=a?s.componenti?.reduce((e,s)=>e+(s.prezzoTotale||0),0)||0:(s.prezzoUnitario||0)*(s.quantita||0);return e.jsxs(t.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:a&&e.jsx("button",{onClick:()=>{return e=s.id,void S(s=>({...s,[e]:!s[e]}));var e},className:"text-gray-400 hover:text-blue-600 transition-colors",title:g(r?"cart.hideComponents":"cart.showComponents"),children:r?e.jsx(o,{className:"w-4 h-4"}):e.jsx(x,{className:"w-4 h-4"})})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium",children:s.prdDes}),e.jsx("div",{className:"text-xs text-gray-400",children:s.prdCod}),a&&e.jsxs("span",{className:"inline-flex items-center text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded mt-1",children:[e.jsx(d,{className:"w-3 h-3 mr-1"}),g("cart.configuredProduct")]})]}),e.jsx("td",{className:"px-4 py-3 text-center text-gray-500",children:s.prdUm}),e.jsx("td",{className:"px-4 py-3",children:a?e.jsx("div",{className:"text-center text-gray-500",title:g("cart.quantityFixed"),children:s.quantita}):e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>v(s.id,Math.max(1,s.quantita-1)),className:"p-1 rounded hover:bg-gray-200 transition-colors",children:e.jsx(m,{className:"w-3 h-3"})}),e.jsx("input",{type:"number",min:"1",value:s.quantita,onChange:e=>{const t=parseInt(e.target.value);t>0&&v(s.id,t)},className:"w-14 text-center border rounded px-1 py-0.5 text-sm"}),e.jsx("button",{onClick:()=>v(s.id,s.quantita+1),className:"p-1 rounded hover:bg-gray-200 transition-colors",children:e.jsx(p,{className:"w-3 h-3"})})]})}),e.jsx("td",{className:"px-4 py-3 text-right",children:a?"â€”":y.currency(s.prezzoUnitario||0)}),e.jsx("td",{className:"px-4 py-3 text-right font-medium",children:y.currency(c)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a&&e.jsx("button",{onClick:()=>(e=>{N("/configuratore",{state:{editConfig:e.config,editId:e.id}})})(s),className:"p-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors",title:g("cart.reconfigure"),children:e.jsx(d,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(s.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded transition-colors",title:g("common.delete"),children:e.jsx(i,{className:"w-4 h-4"})})]})})]}),a&&r&&e.jsxs(e.Fragment,{children:[s.config&&e.jsxs("tr",{className:"bg-purple-50",children:[e.jsx("td",{}),e.jsx("td",{colSpan:6,className:"px-4 py-2",children:e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-purple-700",children:[e.jsx("span",{children:e.jsxs("strong",{children:[g("cart.configParams"),":"]})}),e.jsxs("span",{children:["ðŸ“ ",g("configurator.height"),": ",s.config.altezzaPali,"cm"]}),e.jsxs("span",{children:["ðŸŽ¨ ",g("configurator.slats"),": ",s.config.tipoDoghe]}),e.jsxs("span",{children:["ðŸ”© ",g("configurator.fixing"),": ",s.config.fissaggio]}),e.jsxs("span",{children:["ðŸŽ¯ ",g("configurator.colorSlats"),": ",s.config.coloreDoghe]}),!s.config.stessoColore&&e.jsxs("span",{children:["ðŸŽ¯ ",g("configurator.colorPoles"),": ",s.config.colorePali]}),e.jsxs("span",{children:["ðŸ“ ",g("configurator.sections"),": ",s.config.sezioni?.length||s.config.numeroSezioni||0]})]})})]}),s.componenti?.map((t,a)=>e.jsxs("tr",{className:"bg-blue-50/50 text-sm",children:[e.jsx("td",{}),e.jsxs("td",{className:"px-4 py-2 pl-10 text-gray-600",children:[e.jsx("span",{className:"text-gray-400 mr-1",children:"â””"}),t.prdDes,e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:t.prdCod})]}),e.jsx("td",{className:"px-4 py-2 text-center text-gray-500 text-xs",children:t.prdUm}),e.jsx("td",{className:"px-4 py-2 text-center text-gray-500",children:t.quantita}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-500",children:y.currency(t.prezzoUnitario||0)}),e.jsx("td",{className:"px-4 py-2 text-right text-gray-600",children:y.currency(t.prezzoTotale||0)}),e.jsx("td",{})]},`${s.id}-comp-${a}`))]})]},s.id)})})]})})}),e.jsxs("div",{className:"mt-6 flex flex-col md:flex-row justify-between items-start gap-4",children:[e.jsxs("button",{onClick:()=>N("/catalogo"),className:"btn-secondary flex items-center gap-2",children:[e.jsx(n,{className:"w-4 h-4"}),g("cart.continueShopping")]}),e.jsxs("div",{className:"card p-5 min-w-[280px]",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:g("cart.subtotal")}),e.jsx("span",{children:y.currency(C())})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:g("cart.vat")}),e.jsx("span",{children:y.currency(z())})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:g("cart.total")}),e.jsx("span",{children:y.currency(k())})]})]}),e.jsxs("button",{onClick:()=>{0!==f.length?N("/preventivo"):j.error(g("cart.emptyCartError"))},className:"btn-primary w-full mt-4 flex items-center justify-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),g("cart.saveQuote")]})]})]})]})}export{g as default};
