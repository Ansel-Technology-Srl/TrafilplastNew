/* ============================================================
   index.css — Aggiornamento Fase 7: Accessibilità + Focus Ring
   ============================================================
   ISTRUZIONI: Aggiungere queste regole IN FONDO al file index.css
   esistente, DOPO le classi custom Tailwind già presenti.
   ============================================================ */

/* -----------------------------------------------------------
   A. Screen Reader Only (sr-only migliorato)
   Tailwind ha già .sr-only ma aggiungiamo il focus-within
   per i componenti SkipLinks che devono apparire al focus.
   ----------------------------------------------------------- */
.sr-only-focusable:focus,
.sr-only-focusable:focus-within,
.focus-within\:not-sr-only:focus-within {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* -----------------------------------------------------------
   B. Focus Ring migliorato su TUTTI i bottoni custom
   Aggiunge un anello di focus visibile per navigazione tastiera.
   WCAG 2.4.7 — Focus Visible
   ----------------------------------------------------------- */
.btn-primary,
.btn-secondary,
.btn-success,
.btn-danger {
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500;
}

/* Focus ring per link nella sidebar */
.nav-link:focus-visible,
.sidebar a:focus-visible,
.sidebar button:focus-visible {
  @apply outline-none ring-2 ring-primary-500 ring-offset-2 rounded;
}

/* Focus ring per selettore lingua */
.lang-selector button:focus-visible {
  @apply outline-none ring-2 ring-primary-500 ring-offset-1 rounded;
}

/* -----------------------------------------------------------
   C. Contrasto colori fix
   primary-600 (#2563eb) ha contrasto 3.96:1 su bianco → NON PASSA AA
   Usiamo primary-700 (#1d4ed8, contrasto 5.56:1) per testo puro.
   I bottoni con sfondo colorato + testo bianco vanno bene così.
   ----------------------------------------------------------- */

/* Testo link e testo primario: usa primary-700 per contrasto AA */
.text-primary-link {
  @apply text-primary-700;
}

/* Badge e chip con testo su sfondo chiaro */
.badge-primary {
  @apply bg-primary-100 text-primary-800;
}

/* Placeholder text: gray-400 ha contrasto 2.48:1 → usa gray-500 (4.64:1) */
.input-field::placeholder {
  @apply text-gray-500;
}

/* Gray-400 in altri contesti → portare a gray-500 minimo */
.text-muted {
  @apply text-gray-500;
}

/* -----------------------------------------------------------
   D. Reduced Motion
   Disabilita animazioni per utenti con preferenza reduced-motion.
   Il 3D (OrbitControls) resta interattivo — l'alternativa 
   testuale AccessibleConfigurator copre quel caso.
   WCAG 2.3.3 — Animation from Interactions
   ----------------------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* -----------------------------------------------------------
   E. High Contrast Mode support
   Windows High Contrast mode (forced-colors)
   ----------------------------------------------------------- */
@media (forced-colors: active) {
  .btn-primary,
  .btn-secondary,
  .btn-success,
  .btn-danger {
    border: 2px solid ButtonText;
  }

  .input-field {
    border: 1px solid ButtonText;
  }

  .card {
    border: 1px solid CanvasText;
  }
}

/* -----------------------------------------------------------
   F. Print styles minimi
   Nasconde elementi non necessari in stampa
   ----------------------------------------------------------- */
@media print {
  .no-print,
  nav,
  .sidebar {
    display: none !important;
  }

  .card {
    box-shadow: none;
    border: 1px solid #ccc;
  }
}
